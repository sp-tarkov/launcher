@inject ConfigHelper ConfigHelper
@inject StateHelper StateHelper
@inject LocaleHelper LocaleHelper

<MudItem sm="12">
    <MudPaper Class="pa-5 ml-1 gap-2 d-flex flex-column setting-on-hover-container mud-background-gray border-2 border-solid mud-border-lines-default" Elevation="3">
        <MudTooltip Arrow="true" Placement="Placement.Bottom" Color="Color.Info" Text="Image cannot be changed for now">
            <SettingSwitchComponent Switch="@showBackgroundSwitch" OptionName="@(LocaleHelper.Get("setting_option_background"))" SwitchFunc="@SetBackgroundUsage"/>
        </MudTooltip>
        <SettingLocaleComponent Options="@_localeOptions" OptionName="@(LocaleHelper.Get("setting_option_language"))"/>
    </MudPaper>
</MudItem>

@code
{
    private bool showBackgroundSwitch { get; set; }
    private Dictionary<string, string> _localeOptions { get; set; }

    protected override void OnInitialized()
    {
        showBackgroundSwitch = ConfigHelper.GetConfig().UseBackground;
        _localeOptions = LocaleHelper.GetAvailableLocales();
        base.OnInitialized();
    }

    private async Task SetBackgroundUsage()
    {
        showBackgroundSwitch = !showBackgroundSwitch;
        StateHelper.SetBackground(showBackgroundSwitch);
        ConfigHelper.SetUseBackground(showBackgroundSwitch);
    }
}
